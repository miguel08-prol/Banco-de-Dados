<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Tech Solutions</title>
    <link rel="stylesheet" href="mecanica.css">
    <link rel="icon" href="icon/logo-sem-fundo.png">
</head>
<body>
   <header>
    <div class="container">
        <img src="icon/logo-fundo.png" alt="Logo Auto Tech Solutions" class="header-logo">
        <h1>Auto Tech Solutions</h1>
    </div>
</header>
 <nav>
    <div class="container">
     <a href="index.html">ğŸ  PÃ¡gina Inicial</a>
     <a href="listacliente.php">ğŸ“‹ Lista de Cliente</a>
     </div>
    </nav>

    <main class="container">
    <div class="main-content">

    <section class="form-section">
    <h2>ğŸ”§ Cadastrar Cliente</h2>
    <form action="cadastrarcliente.php" method="POST" id="cadastroForm">
    <div class="form-row">
        <div class="form-group">
            <label for="nome">ğŸ‘¤ Nome:</label>
            <input type="text" id="nome" name="nome_cliente" required placeholder="Digite o nome completo">
        </div>

        <div class="form-group">
            <label for="CPF">ğŸ“„ CPF:</label>
            <input type="text" id="CPF" name="CPF" required placeholder="000.000.000-00">
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="telefone">ğŸ“ Telefone:</label>
            <input type="text" id="telefone" name="telefone" required placeholder="(00) 00000-0000">
        </div>

        <div class="form-group">
            <label for="veiculo">ğŸš— VeÃ­culo (marca):</label>
            <input type="text" id="veiculo" name="marca_veiculo" required placeholder="Ex: Toyota, Ford, Honda">
        </div>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="servico">ğŸ› ï¸ ServiÃ§o:</label>
            <input type="text" id="servico" name="servico" required placeholder="Ex: RevisÃ£o, Troca de Ã³leo">
        </div>

        <div class="form-group">
            <label for="produto">ğŸ“¦ Produto:</label>
            <input type="text" id="produto" name="nome_produto" required placeholder="Ex: Filtro, Ã“leo, Pneu">
        </div>
    </div>

    <div class="form-group full-width">
        <label for="observacao">ğŸ“ ObservaÃ§Ã£o:</label>
        <input type="text" id="observacao" name="observacao" placeholder="InformaÃ§Ãµes adicionais (opcional)">
    </div>

    <div class="form-submit">
        <button type="submit" class="btn-primary">âœ… Cadastrar Cliente</button>
    </div>
    </form>
    </section>
    </div>
    </main>
     <footer>
        <div class="container">
            <p>ğŸ”§ Â© 2025 Auto Tech Solutions. Todos os direitos reservados. âš™ï¸</p>
        </div>
    </footer>
    <div id="toast" class="toast-notification">Mensagem aqui</div>

    <script>
        const form = document.getElementById('cadastroForm');
        const toast = document.getElementById('toast');

        // Adiciona estilo de animaÃ§Ãµes
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fall {
                to {
                    transform: translateY(100vh) rotate(360deg);
                    opacity: 0;
                }
            }
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                10%, 30%, 50%, 70%, 90% { transform: translateX(-10px); }
                20%, 40%, 60%, 80% { transform: translateX(10px); }
            }
        `;
        document.head.appendChild(style);

        form.addEventListener('submit', function(event) {
            event.preventDefault(); 

            const inputs = form.querySelectorAll('input[required]');
            let isValid = true;
            
            // Valida campos
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    isValid = false;
                    input.style.borderColor = '#dc3545';
                    input.style.animation = 'shake 0.5s ease-in-out';
                } else {
                    input.style.borderColor = '#e0e0e0';
                    input.style.animation = '';
                }
            });

            if (!isValid) {
                showToast('âš ï¸ Por favor, preencha todos os campos obrigatÃ³rios.', 'error');
                return;
            }

            // Mostra indicador de carregamento
            const submitBtn = form.querySelector('button[type="submit"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = 'ğŸ”„ Cadastrando...';
            submitBtn.disabled = true;
            submitBtn.style.opacity = '0.7';

            const formData = new FormData(this);

            // Log para debug
            console.log('Enviando dados:');
            for (let pair of formData.entries()) {
                console.log(pair[0] + ': ' + pair[1]);
            }

            fetch('cadastrarcliente.php', {
                method: 'POST',
                body: formData
            })
            .then(response => {
                console.log('Status da resposta:', response.status);
                return response.text();
            })
            .then(text => {
                console.log('Resposta do servidor:', text);
                
                // Tenta parsear como JSON
                let data;
                try {
                    data = JSON.parse(text);
                } catch (e) {
                    console.error('Erro ao parsear JSON:', e);
                    console.error('Texto recebido:', text);
                    throw new Error('Resposta invÃ¡lida do servidor');
                }
                
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                submitBtn.style.opacity = '1';
                
                if (data.status === 'success') {
                    showToast('âœ… ' + data.message, 'success');
                    form.reset();
                    
                    // Adiciona confete de sucesso
                    createConfetti();
                    
                    // AnimaÃ§Ã£o de sucesso nos campos
                    inputs.forEach(input => {
                        input.style.borderColor = '#28a745';
                        setTimeout(() => {
                            input.style.borderColor = '#e0e0e0';
                        }, 2000);
                    });
                } else {
                    showToast('âŒ ' + data.message, 'error');
                }
            })
            .catch(error => {
                console.error('Erro completo:', error);
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                submitBtn.style.opacity = '1';
                showToast('âš ï¸ Erro ao conectar com o servidor. Verifique o console.', 'error');
            });
        });

        function showToast(message, type) {
            toast.textContent = message;
            toast.className = 'toast-notification ' + type;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 4000);
        }

        // FunÃ§Ã£o para criar confete
        function createConfetti() {
            const colors = ['#ff6b00', '#ffa500', '#28a745', '#20c997'];
            const confettiCount = 50;
            
            for (let i = 0; i < confettiCount; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.style.position = 'fixed';
                    confetti.style.width = '10px';
                    confetti.style.height = '10px';
                    confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                    confetti.style.left = Math.random() * 100 + '%';
                    confetti.style.top = '-10px';
                    confetti.style.borderRadius = '50%';
                    confetti.style.pointerEvents = 'none';
                    confetti.style.zIndex = '10000';
                    confetti.style.animation = `fall ${2 + Math.random() * 2}s linear forwards`;
                    
                    document.body.appendChild(confetti);
                    
                    setTimeout(() => {
                        confetti.remove();
                    }, 4000);
                }, i * 30);
            }
        }

        // Remove animaÃ§Ã£o de shake ao digitar
        const inputs = form.querySelectorAll('input[required]');
        inputs.forEach(input => {
            input.addEventListener('input', function() {
                if (this.value.trim()) {
                    this.style.borderColor = '#e0e0e0';
                    this.style.animation = '';
                }
            });
            
            // Adiciona efeito de foco suave
            input.addEventListener('focus', function() {
                this.style.transform = 'scale(1.02)';
                this.style.transition = 'all 0.3s ease';
            });
            
            input.addEventListener('blur', function() {
                this.style.transform = 'scale(1)';
            });
        });
    </script>
</body>
</html>