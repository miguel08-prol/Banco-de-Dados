<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto Tech Solutions</title>
    <link rel="stylesheet" href="mecanica.css">
    <link rel="icon" href="icon/logo-sem-fundo.png">
</head>
<body>
   <header>
    <div class="container">
        <img src="icon/logo-fundo.png" alt="Logo Auto Tech Solutions" class="header-logo">
        
        <h1>Auto Tech Solutions</h1>
    </div>
</header>
 <nav>
    <div class="container">
     <a href="index.html">Página Inicial</a>
     <a href="listacliente.php">Lista de Cliente</a>
     </div>
    </nav>

    <main class="container">
    <div class="main-content">

    <section class="form-section">
    <h2>Cadastrar Cliente</h2>
    <form action="cadastrarcliente.php" method="POST"> 
    <div class="form-group"> 
        <label for="nome">Nome:</label>
        <input type="text" id="nome" name="nome_cliente" required>
    </div>

      <div class="form-group"> 
        <label for="cpf">CPF:</label>
        <input type="text" id="CPF" name="CPF" required>
    </div>

      <div class="form-group"> 
        <label for="nome">Telefone:</label>
        <input type="text" id="telefone" name="telefone" required>
    </div>

    <div class="form-group"> 
        <label for="nome">Veiculo(marca):</label>
        <input type="text" id="veiculo" name="marca_veiculo" required>
    </div>

     <div class="form-group"> 
        <label for="nome">Serviço:</label>
        <input type="text" id="servico" name="servico" required>
    </div>

     <div class="form-group"> 
        <label for="nome">Produto:</label>
        <input type="text" id="produto" name="nome_produto" required>
    </div>

     <div class="form-group"> 
        <label for="nome">Observacão:</label>
        <input type="text" id="observacao" name="observacao" >
    </div>

      <button type="submit">Cadastrar Cliente</button>
    </form>
    </section>
    </div>
    </main>
     <footer>
        <div class="container">
            <p>&copy; 2025 Auto Tech Solutions. Todos os direitos reservados.</p>
        </div>
    </footer>
    <div id="toast" class="toast-notification">Mensagem aqui</div>
    <script>
        // Seleciona o formulário e a notificação
        const form = document.querySelector('.form-section form');
        const toast = document.getElementById('toast');

        // Adiciona um "ouvinte" para o evento de SUBMIT do formulário
        form.addEventListener('submit', function(event) {
            
            // 1. Impede o recarregamento da página
            event.preventDefault(); 

            // 2. Pega os dados do formulário
            const formData = new FormData(this);

            // 3. Envia os dados "por baixo dos panos" (Fetch)
            fetch('cadastrarcliente.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json()) // Espera uma resposta JSON
            .then(data => {
                // 4. Temos uma resposta! Vamos mostrar a notificação
                if (data.status === 'success') {
                    showToast(data.message, 'success');
                    form.reset(); // Limpa o formulário
                } else {
                    showToast(data.message, 'error');
                }
            })
            .catch(error => {
                // 5. Se a conexão falhar
                showToast('Erro de rede. Tente novamente.', 'error');
                console.error('Fetch Error:', error);
            });
        });

        // Função para mostrar e esconder a notificação
        function showToast(message, type) {
            // Define a mensagem e o tipo (success/error)
            toast.textContent = message;
            toast.className = 'toast-notification ' + type;

            // Adiciona a classe 'show' para ela aparecer
            toast.classList.add('show');

            // Depois de 3 segundos (3000ms), remove a classe 'show'
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>